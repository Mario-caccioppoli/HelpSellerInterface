<div id="gest-prodotti" class="container row">
    <div class="col-lg-12 centered fleft">
        <h2 class="mb50">Gestione Prodotti</h2>
        <div class="col-lg-12 mb50 form form-control">
            <div class="row">
                <div class="col-lg-6 pd20">
                <label><p class="ricerca">Codice</p></label>
                <input [(ngModel)]="filtroCodice" id="filtroCodice" (ngModelChange)="changeCodice()" type="search" class="form-control" placeholder="Ricerca codice..." name="searchbar" aria-label="Search">
                </div>
                <div class="col-lg-6 pd20">
                <label><p class="ricerca">Nome</p></label>
                <br>
                <input type="text" class="form-control" id="filtroNome" [(ngModel)]="filtroNome" (ngModelChange)="changeNome()" placeholder="Ricerca nome..." name="searchbar" aria-label="Search">
                </div>
            </div>
        </div>
    </div>
</div>

<!-- <table class="table table-borderless">
    <tr class="table-light">
        <td class="table-light">Codice</td>
        <td class="table-light">Nome</td>
    </tr>
    <tr class="table-light">
        <td class="table-light"><input type="text" id="filtroCodice" [(ngModel)]="filtroCodice" (ngModelChange)="changeCodice()" placeholder="Inserisci Codice "></td>
        <td class="table-light"><input type="text" id="filtroNome" [(ngModel)]="filtroNome" (ngModelChange)="changeNome()" placeholder="Inserisci Nome "></td>
    </tr>
</table>
-->

<div class="table-responsive">          
    <div class="table-responsive-lg">
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Codice</th>
                    <th scope="col">Nome</th>
                    <th scope="col">Prezzo</th>
                    <th scope="col">Azioni</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let prodotto of prodotti">
                    <td scope="col">{{prodotto.id}}</td>
                    <td scope="col">{{prodotto.nomeProdotto}}</td>
                    <td scope="col">{{prodotto.prezzo}} €</td>
                    <td scope="col"><button type="button" class="btn btn-primary edit" data-bs-toggle="modal" data-bs-target="#modificaProdotto" (click)="this.idProdottoDaModificare=prodotto.id"><i class="fa fa-edit fa-2x" aria-hidden="true"></i></button>
                        <button type="button" class="btn btn-primary edit" data-bs-toggle="modal" data-bs-target="#eliminaProdotto" (click)="this.idProdottoEliminare=prodotto.id"><i class="fas fa-trash-alt fa-2x"></i></button>
                        <!-- <button type="button" class="btn btn-primary pulsanti"><i class="fas fa-sticky-note" ></i></button> -->
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<br><br>

<div class="centered">
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#aggiungiProdotto">Aggiungi Prodotto</button>
</div>

<!-- MODAL_CANCELLA PRODOTTO -->
<div class="modal fade" id="eliminaProdotto" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Eliminazione prodotto</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Desideri eliminare il prodotto?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annulla</button>
                <button type="button" (click)="eliminaProdotto(this.idProdottoEliminare)" class="btn btn-primary" #Elimina>Elimina</button>
            </div>
        </div>
    </div>
</div>

<!-- MODAL MODIFICA PRODOTTO -->

<div class="modal fade" id="modificaProdotto" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form class="form-control" #modelModificaProdotto="ngForm" (ngSubmit)="modificaProdotto(modelModificaProdotto.value)" enctype="multipart/form-data">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modifica Prodotto</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <div class="modal-body">
                        <div class="modal-body">
                            <div class="modal-body">
                                <p><b>Nome Prodotto</b></p>
                                <input class="form-control" type="text" ngModel name="nome" placeholder="inserisci nome prodotto"><br>
                                <p><b>Descrizione Prodotto</b></p>
                                <textarea class="form-control" name="descrizione" ngModel id=" " cols="30" rows="5"></textarea>
                                <br>
                                <div><b>Quantità</b></div>
                                <input class="form-control" type="number" name="quantita" ngModel placeholder="inserisci quantita "><br>
                                <div><b>Quantità Minima</b></div>
                                <input class="form-control" type="number" name="quantitaMinima" ngModel placeholder="inserisci quantita minima "><br>
                                <p><b>Peso</b></p>
                                <input class="form-control" type="number" name="peso" ngModel placeholder=" inserisci peso"><br>
                                <p><b>Volume</b></p>
                                <input class="form-control" type="number" name="volume" ngModel placeholder="inserisci volume"><br>
                                <p><b>Prezzo</b></p>
                                <input class="form-control" type="number" name="prezzo" ngModel placeholder="inserisci prezzo">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annulla</button>
                    <button type="submit" class="btn btn-primary">Modifica</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- MODAL AGGIUNGI PRODOTTO -->
<div class="modal fade" id="aggiungiProdotto" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form class="form-control" #modelAggiungiProdotto="ngForm" (ngSubmit)="aggiungiProdotto(modelAggiungiProdotto.value)">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Aggiungi Prodotto</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <div class="modal-body">
                        <div class="modal-body">
                            <div class="modal-body">
                                <div><b>Inserisci Immagine</b></div><br>
                                <input class="form-control" type="file" class="file-input" (change)="uploadFotoProdotto($event.target.files)" name="files" />
                                <br><br>
                                <div><b>Nome Prodotto</b></div>
                                <input class="form-control" type="text" ngModel name="nome" placeholder="inserisci nome prodotto"><br>
                                <div><b>Descrizione Prodotto</b></div>
                                <textarea class="form-control" name="descrizione" ngModel id=" " cols="30 " rows="5 "></textarea>
                                <br><br>
                                <div><b>Quantità</b></div>
                                <input class="form-control" type="number" name="quantita" ngModel placeholder="inserisci quantita "><br>
                                <div><b>Quantità Minima</b></div>
                                <input class="form-control" type="number" name="quantitaMinima" ngModel placeholder="inserisci quantita minima "><br>
                                <div><b>Peso</b></div>
                                <input class="form-control" type="number" name="peso" ngModel placeholder="inserisci peso "><br>
                                <div><b>Volume</b></div>
                                <input class="form-control" type="number" name="volume" ngModel placeholder="inserisci volume "><br>
                                <div><b>Prezzo</b></div>
                                <input class="form-control" type="number" name="prezzo" ngModel placeholder="inserisci prezzo ">
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annulla</button>
                    <button type="submit" class="btn btn-success">Aggiungi Prodotto</button>
                </div>
            </form>
        </div>
    </div>
</div>